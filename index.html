<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GHS Underground</title>
  <link rel="stylesheet" href="style.css">

  <script>
    // --- Supabase email verification redirect fix for GitHub Pages ---
    (function() {
      // If user is redirected with a Supabase hash (after email verification)
      if (window.location.hash && window.location.pathname === "/GHSUnderground/") {
        // Save the hash temporarily
        sessionStorage.setItem("supabaseAuthRedirect", window.location.hash);
        // Redirect to your callback route while preserving the token
        window.location.href = "/GHSUnderground/#/auth/callback" + window.location.hash;
      } else {
        // If hash was lost, recover it
        const saved = sessionStorage.getItem("supabaseAuthRedirect");
        if (saved && window.location.hash === "") {
          sessionStorage.removeItem("supabaseAuthRedirect");
          window.location.hash = saved;
        }
      }
    })();
  </script>
</head>
<body>
  <h1>Welcome to GHS Underground</h1>

  <section>
    <h2>Sign Up</h2>
    <form id="signup-form" onsubmit="return false;">
      <input type="text" name="full_name" placeholder="Full Name" required>
      <input type="email" name="email" placeholder="Email" required>
      <input type="password" name="password" placeholder="Password" required>
      <button type="submit">Sign Up</button>
    </form>
  </section>

  <section>
    <h2>Log In</h2>
    <form id="login-form" onsubmit="return false;">
      <input type="email" name="email" placeholder="Email" required>
      <input type="password" name="password" placeholder="Password" required>
      <button type="submit">Log In</button>
    </form>
  </section>

  <script type="module" src="script.js"></script>
</body>
</html>
